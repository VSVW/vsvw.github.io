{
  "title":"京王アプリで使用されている在線データを解析してみた",
  "description":"",
  "date":"2024/08/14",
  "paragraph":["0$h3","1$p","2$div$info_warn2","3$h3","4$p","5$h3","6$p","7$pre","8$h3","15$h4$$$yy","16$p","17$h4$$$TS","18$p","19$h4$$$id","20$p","21$img","22$h4$$$sn","23$p","24$table","25$h4$$$tr","26$p","27$h4$$$sy","28$p","29$table","30$h4$$$ki","31$p","32$h4$$$dl","33$p","34$h4$$$ik","35$p","36$table","37$h4$$$sr","38$p","39$h4$$$inf","40$p"],
  "0$h3":"概要",
  "1$p":"<a href='https://www.keio.co.jp/keioapp/' target='_blank' rel='noopener noreferrer'>京王アプリ</a>の列車走行位置サービスで使用されている在線データ(JSON形式)の仕様について解析してみた。",
  "2$div$info_warn2":"本コンテンツは私的に行った調査の結果を記したものです。<br>京王アプリの利用規約に反する行為を容認したり、推奨するものではありません。",
  "3$h3":"アクセス方法",
  "4$p":"<a href='https://i.opentidkeio.jp/data/traffic_info.json' target='_blank' rel='noopener noreferrer'>こちらのJSONファイル</a>から京王線・相模原線・井の頭線全ての在線データが取得できる。",
  "5$h3":"キー一覧",
  "6$p":"水色になっているキー名をクリック(orタップ)すると説明に飛びます",
  "7$pre":"<code><span class='code_prev_comment'>▼</span>&nbsp;up<br>&nbsp;&nbsp;<span class='code_prev_comment'>▼</span>&nbsp;0<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class='code_prev_comment'>▼</span>&nbsp;dt<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class='code_prev_comment'>▼</span>&nbsp;0<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#yy'>yy</a>:             <span class='code_prev_pi'>String</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#yy'>mt</a>:             <span class='code_prev_pi'>String</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#yy'>dy</a>:             <span class='code_prev_pi'>String</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#yy'>hh</a>:             <span class='code_prev_pi'>String</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#yy'>mm</a>:             <span class='code_prev_pi'>String</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#yy'>ss</a>:             <span class='code_prev_pi'>String</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;st:                 <span class='code_prev_pi'>String</span><br><span class='code_prev_comment'>▼</span>&nbsp;<a href='#TS'>TS</a><br>&nbsp;&nbsp;<span class='code_prev_comment'>▼</span>&nbsp;0<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#id'>id</a>:                 <span class='code_prev_pi'>String</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sn:                 <span class='code_prev_pi'>String</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class='code_prev_comment'>▼</span>&nbsp;ps<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class='code_prev_comment'>▼</span>&nbsp;0<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#tr'>tr</a>:             <span class='code_prev_pi'>String</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#sy'>sy</a>:             <span class='code_prev_pi'>String</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sy_tr:          <span class='code_prev_pi'>String</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#ki'>ki</a>:             <span class='code_prev_pi'>String</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bs:             <span class='code_prev_pi'>String</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#dl'>dl</a>:             <span class='code_prev_pi'>String</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#ik'>ik</a>:             <span class='code_prev_pi'>String</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#ik'>ik_tr</a>:          <span class='code_prev_pi'>String</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#sr'>sr</a>:             <span class='code_prev_pi'>String</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#inf'>inf</a>:            <span class='code_prev_pi'>String</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class='code_prev_comment'>▶</span>&nbsp;1<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class='code_prev_comment'>▶</span>&nbsp;2<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:<br><br>&nbsp;&nbsp;<span class='code_prev_comment'>▶</span>&nbsp;1<br>&nbsp;&nbsp;<span class='code_prev_comment'>▶</span>&nbsp;2<br>&nbsp;&nbsp;&nbsp;&nbsp;:<br>&nbsp;&nbsp;&nbsp;&nbsp;:<br><br><span class='code_prev_comment'>▼</span>&nbsp;<a href='#TS'>TB</a><br>&nbsp;&nbsp;<span class='code_prev_comment'>▼</span>&nbsp;0<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#id'>id</a>:                 <span class='code_prev_pi'>String</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sn:                 <span class='code_prev_pi'>String</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class='code_prev_comment'>▼</span>&nbsp;ps<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class='code_prev_comment'>▼</span>&nbsp;0<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#tr'>tr</a>:             <span class='code_prev_pi'>String</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#sy'>sy</a>:             <span class='code_prev_pi'>String</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sy_tr:          <span class='code_prev_pi'>String</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#ki'>ki</a>:             <span class='code_prev_pi'>String</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bs:             <span class='code_prev_pi'>String</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#dl'>dl</a>:             <span class='code_prev_pi'>String</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#ik'>ik</a>:             <span class='code_prev_pi'>String</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#ik'>ik_tr</a>:          <span class='code_prev_pi'>String</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#sr'>sr</a>:             <span class='code_prev_pi'>String</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#inf'>inf</a>:            <span class='code_prev_pi'>String</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class='code_prev_comment'>▶</span>&nbsp;1<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class='code_prev_comment'>▶</span>&nbsp;2<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:<br><br>&nbsp;&nbsp;<span class='code_prev_comment'>▶</span>&nbsp;1<br>&nbsp;&nbsp;<span class='code_prev_comment'>▶</span>&nbsp;2<br>&nbsp;&nbsp;&nbsp;&nbsp;:<br>&nbsp;&nbsp;&nbsp;&nbsp;:</code>",
  "8$h3":"キー解説",
  "15$h4$$$yy":"yy,mt,dy,hh,mm,ss",
  "16$p":"データの更新時刻を表す。yyは西暦、mtは月、dyは日、hhは時、mmは分、ssは秒。<br>なお、yy以外のキーに10未満の値が入る際には先頭に0を加えて01のように表す。またhhは翌日午前4時にリセットされるため、深夜0時では24、深夜1時は25となる。",
  "17$h4$$$TS":"TS,TB",
  "18$p":"列車が格納されているキー。TSには駅構内在線中の列車、TBには駅間在線中の列車が含まれ、配下のデータ構造は同一。",
  "19$h4$$$id":"id",
  "20$p":"列車の在線地点を表すID。各値の対応関係は以下の通り。",
  "21$img":"1678633200/img1.png",
  "22$h4$$$sn":"sn",
  "23$p":"地点がどの路線に属すかを表す。各値の対応関係は以下の通り。",
  "24$table":[["th$sn","th$路線"],["td$<span class='code_prev_pi'>K</span>","td$京王線"],["td$<span class='code_prev_pi'>S</span>","td$相模原線"],["td$<span class='code_prev_pi'>I</span>","td$井の頭線"]],
  "25$h4$$$tr":"tr",
  "26$p":"列車番号。",
  "27$h4$$$sy":"sy",
  "28$p":"列車種別。各値の対応関係は以下の通り。<br>尚、4は以前準特急が割り当てられていた。",
  "29$table":[["th$sy","th$種別名"],["td$<span class='code_prev_pi'>1</span>","td$特急"],["td$<span class='code_prev_pi'>2</span>","td$急行"],["td$<span class='code_prev_pi'>3</span>","td$快速"],["td$<span class='code_prev_pi'>5</span>","td$区間急行"],["td$<span class='code_prev_pi'>6</span>","td$各駅停車"],["td$<span class='code_prev_pi'>7</span>","td$回送"],["td$<span class='code_prev_pi'>8</span>","td$試運転"],["td$<span class='code_prev_pi'>9</span>","td$京王ライナー"],["td$<span class='code_prev_pi'>10</span>","td$臨時"],["td$<span class='code_prev_pi'>11</span>","td$Mt.TAKAO"],["td$<span class='code_prev_pi'>99</span>","td$(不明)"]],
  "30$h4$$$ki":"ki",
  "31$p":"列車の進行方向で、上り列車は0、下り列車は1。",
  "32$h4$$$dl":"dl",
  "33$p":"列車の遅延情報。単位は分で、常に2桁で表される(例:00、01)。",
  "34$h4$$$ik":"ik.ik_tr",
  "35$p":"列車の行先を表す。調査が不十分であるため確証はないものの、ik_trは常に実際の終着駅を示し、ikはik_trと同一である場合も多いものの、一部の列車では方面や途中駅で種別が変わる列車の種別変更駅を示すものと推測される。",
  "36$table":[["th$ik,ik_tr","th$行先"],["td$<span class='code_prev_pi'>001</span>","td$京王線新宿"],["td$<span class='code_prev_pi'>002</span>","td$笹塚"],["td$<span class='code_prev_pi'>003</span>","td$代田橋"],["td$<span class='code_prev_pi'>004</span>","td$明大前"],["td$<span class='code_prev_pi'>005</span>","td$下高井戸"],["td$<span class='code_prev_pi'>006</span>","td$桜上水"],["td$<span class='code_prev_pi'>007</span>","td$上北沢"],["td$<span class='code_prev_pi'>008</span>","td$八幡山"],["td$<span class='code_prev_pi'>009</span>","td$芦花公園"],["td$<span class='code_prev_pi'>010</span>","td$千歳烏山"],["td$<span class='code_prev_pi'>011</span>","td$仙川"],["td$<span class='code_prev_pi'>012</span>","td$つつじヶ丘"],["td$<span class='code_prev_pi'>013</span>","td$柴崎"],["td$<span class='code_prev_pi'>014</span>","td$国領"],["td$<span class='code_prev_pi'>015</span>","td$布田"],["td$<span class='code_prev_pi'>016</span>","td$調布"],["td$<span class='code_prev_pi'>017</span>","td$西調布"],["td$<span class='code_prev_pi'>018</span>","td$飛田給"],["td$<span class='code_prev_pi'>019</span>","td$武蔵野台"],["td$<span class='code_prev_pi'>020</span>","td$多磨霊園"],["td$<span class='code_prev_pi'>021</span>","td$東府中"],["td$<span class='code_prev_pi'>022</span>","td$府中"],["td$<span class='code_prev_pi'>023</span>","td$分倍河原"],["td$<span class='code_prev_pi'>024</span>","td$中河原"],["td$<span class='code_prev_pi'>025</span>","td$聖蹟桜ヶ丘"],["td$<span class='code_prev_pi'>026</span>","td$百草園"],["td$<span class='code_prev_pi'>027</span>","td$高幡不動"],["td$<span class='code_prev_pi'>028</span>","td$南平"],["td$<span class='code_prev_pi'>029</span>","td$平山城址公園"],["td$<span class='code_prev_pi'>030</span>","td$長沼"],["td$<span class='code_prev_pi'>031</span>","td$北野"],["td$<span class='code_prev_pi'>032</span>","td$京王八王子"],["td$<span class='code_prev_pi'>033</span>","td$新線新宿"],["td$<span class='code_prev_pi'>034</span>","td$初台"],["td$<span class='code_prev_pi'>035</span>","td$幡ヶ谷"],["td$<span class='code_prev_pi'>036</span>","td$府中競馬正門前"],["td$<span class='code_prev_pi'>037</span>","td$多摩動物公園"],["td$<span class='code_prev_pi'>038</span>","td$京王片倉"],["td$<span class='code_prev_pi'>039</span>","td$山田"],["td$<span class='code_prev_pi'>040</span>","td$めじろ台"],["td$<span class='code_prev_pi'>041</span>","td$狭間"],["td$<span class='code_prev_pi'>042</span>","td$高尾"],["td$<span class='code_prev_pi'>043</span>","td$高尾山口"],["td$<span class='code_prev_pi'>044</span>","td$京王多摩川"],["td$<span class='code_prev_pi'>045</span>","td$京王稲田堤"],["td$<span class='code_prev_pi'>046</span>","td$京王よみうりランド"],["td$<span class='code_prev_pi'>047</span>","td$稲城"],["td$<span class='code_prev_pi'>048</span>","td$若葉台"],["td$<span class='code_prev_pi'>049</span>","td$京王永山"],["td$<span class='code_prev_pi'>050</span>","td$京王多摩センター"],["td$<span class='code_prev_pi'>051</span>","td$京王堀之内"],["td$<span class='code_prev_pi'>052</span>","td$南大沢"],["td$<span class='code_prev_pi'>053</span>","td$多摩境"],["td$<span class='code_prev_pi'>054</span>","td$橋本"],["td$<span class='code_prev_pi'>081</span>","td$渋谷"],["td$<span class='code_prev_pi'>082</span>","td$神泉"],["td$<span class='code_prev_pi'>083</span>","td$駒場東大前"],["td$<span class='code_prev_pi'>084</span>","td$池ノ上"],["td$<span class='code_prev_pi'>085</span>","td$下北沢"],["td$<span class='code_prev_pi'>086</span>","td$新代田"],["td$<span class='code_prev_pi'>087</span>","td$東松原"],["td$<span class='code_prev_pi'>088</span>","td$明大前"],["td$<span class='code_prev_pi'>089</span>","td$永福町"],["td$<span class='code_prev_pi'>090</span>","td$西永福"],["td$<span class='code_prev_pi'>091</span>","td$浜田山"],["td$<span class='code_prev_pi'>092</span>","td$高井戸"],["td$<span class='code_prev_pi'>093</span>","td$富士見ヶ丘"],["td$<span class='code_prev_pi'>094</span>","td$久我山"],["td$<span class='code_prev_pi'>095</span>","td$三鷹台"],["td$<span class='code_prev_pi'>096</span>","td$井の頭公園"],["td$<span class='code_prev_pi'>097</span>","td$吉祥寺"],["td$<span class='code_prev_pi'>101</span>","td$新宿三丁目"],["td$<span class='code_prev_pi'>102</span>","td$曙橋"],["td$<span class='code_prev_pi'>103</span>","td$市ヶ谷"],["td$<span class='code_prev_pi'>104</span>","td$九段下"],["td$<span class='code_prev_pi'>105</span>","td$神保町"],["td$<span class='code_prev_pi'>106</span>","td$小川町"],["td$<span class='code_prev_pi'>107</span>","td$岩本町"],["td$<span class='code_prev_pi'>108</span>","td$馬喰横山"],["td$<span class='code_prev_pi'>109</span>","td$浜町"],["td$<span class='code_prev_pi'>110</span>","td$森下"],["td$<span class='code_prev_pi'>111</span>","td$菊川"],["td$<span class='code_prev_pi'>112</span>","td$住吉"],["td$<span class='code_prev_pi'>113</span>","td$西大島"],["td$<span class='code_prev_pi'>114</span>","td$大島"],["td$<span class='code_prev_pi'>115</span>","td$東大島"],["td$<span class='code_prev_pi'>116</span>","td$船堀"],["td$<span class='code_prev_pi'>117</span>","td$一之江"],["td$<span class='code_prev_pi'>118</span>","td$瑞江"],["td$<span class='code_prev_pi'>119</span>","td$篠崎"],["td$<span class='code_prev_pi'>120</span>","td$本八幡"],["td$<span class='code_prev_pi'>300</span>","td$京王線新宿・都営新宿線方面"],["td$<span class='code_prev_pi'>301</span>","td$都営新宿線方面"],["td$<span class='code_prev_pi'>302</span>","td$京王線新宿方面"],["td$<span class='code_prev_pi'>303</span>","td$調布方面"],["td$<span class='code_prev_pi'>304</span>","td$高幡不動方面"],["td$<span class='code_prev_pi'>305</span>","td$八幡山方面"],["td$<span class='code_prev_pi'>306</span>","td$笹塚方面"],["td$<span class='code_prev_pi'>400</span>","td$京王八王子方面"],["td$<span class='code_prev_pi'>401</span>","td$高尾山口方面"],["td$<span class='code_prev_pi'>402</span>","td$橋本方面"],["td$<span class='code_prev_pi'>403</span>","td$府中・府中競馬正門前方面"],["td$<span class='code_prev_pi'>501</span>","td$明大前・永福町方面"],["td$<span class='code_prev_pi'>502</span>","td$吉祥寺方面"],["td$<span class='code_prev_pi'>999</span>","td$-"]],
  "37$h4$$$sr":"sr",
  "38$p":"列車の編成両数。",
  "39$h4$$$inf":"inf",
  "40$p":"列車についての付帯情報。"
}
