{
  "title":"東急線アプリで使用されていた在線データを解析してみた",
  "description":"",
  "date":"2023/03/06",
  "paragraph":["0$h3","1$p","2$div$info_warn2","3$h3","4$p","5$table","6$h3","7$p","8$p","9$pre","10$p","11$pre","12$p","13$pre","14$h3","15$h4$$$operation_number","16$p","17$h4$$$kind","18$p","19$div$dmain_table","20$h4$$$delay_time","21$p","22$h4$$$line_id","23$p","24$table","25$h4$$$num_of_cars","26$p","27$h4$$$train_line_id","28$p","29$h4$$$station_id","30$p","31$img","32$img","33$h4$$$up","34$p","35$h4$$$affiliation","36$p","37$div$dmain_table"],
  "0$h3":"概要",
  "1$p":"<a href='https://ii.tokyu.co.jp/tokyusenapuri' target='_blank' rel='noopener noreferrer'>東急線アプリ</a>で2022年9月まで使用されていた在線データ(JSON形式)の仕様について解析してみた。今回解析したデータは最新版のアプリでは使用されていないものの、記事公開時点では引き続きアクセスが可能である。",
  "2$div$info_warn2":"本コンテンツは私的に行った調査の結果を記したものです。<br>東急線アプリの利用規約に反する行為を容認したり、推奨するものではありません。",
  "3$h3":"アクセス方法",
  "4$p":"データは路線ごとに配信されており、各路線のURLは以下の通り。なお、URLから拡張子部分(.json)を除いてアクセスすると2022年9月までアプリで使用されていた列車走行位置表示画面が閲覧できる。",
  "5$table":[["th$路線","th$URL"],["td$東横線","td$<a href='https://tokyu-tid.s3.amazonaws.com/toyoko.json' target='_blank' rel='noopener noreferrer'>https://tokyu-tid.s3.amazonaws.com/toyoko.json</a>"],["td$目黒線","td$<a href='https://tokyu-tid.s3.amazonaws.com/meguro.json' target='_blank' rel='noopener noreferrer'>https://tokyu-tid.s3.amazonaws.com/meguro.json</a>"],["td$田園都市線","td$<a href='https://tokyu-tid.s3.amazonaws.com/dento.json' target='_blank' rel='noopener noreferrer'>https://tokyu-tid.s3.amazonaws.com/dento.json</a>"],["td$大井町線","td$<a href='https://tokyu-tid.s3.amazonaws.com/oimachi.json' target='_blank' rel='noopener noreferrer'>https://tokyu-tid.s3.amazonaws.com/oimachi.json</a>"],["td$池上線・多摩川線","td$<a href='https://tokyu-tid.s3.amazonaws.com/iketama.json' target='_blank' rel='noopener noreferrer'>https://tokyu-tid.s3.amazonaws.com/iketama.json</a>"],["td$世田谷線","td$<a href='https://tokyu-tid.s3.amazonaws.com/setagaya.json' target='_blank' rel='noopener noreferrer'>https://tokyu-tid.s3.amazonaws.com/setagaya.json</a>"]],
  "6$h3":"キー一覧",
  "7$p":"水色になっているキー名をクリック(orタップ)すると説明に飛びます",
  "8$p":"toyoko.json,meguro.json,dento.json,oimachi.json",
  "9$pre":"<code><span class='code_prev_comment'>▼</span>&nbsp;trains<br>&nbsp;&nbsp;<span class='code_prev_comment'>▼</span>&nbsp;0<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#operation_number'>operation_number</a>:               <span class='code_prev_gr'>Number</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;operation_serial_number:        <span class='code_prev_gr'>Number</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#kind'>kind</a>:                           <span class='code_prev_pi'>String</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#train_kind'>train_kind</a>:                     <span class='code_prev_gr'>Number</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#delay_time'>delay_time</a>:                     <span class='code_prev_gr'>Number</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#line_id'>line_id</a>:                        <span class='code_prev_gr'>Number</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#num_of_cars'>num_of_cars</a>:                    <span class='code_prev_pi'>String</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#train_line_id'>train_line_id</a>:                  <span class='code_prev_gr'>Number</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#station_id'>station_id</a>:                     <span class='code_prev_gr'>Number</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#section_id'>section_id</a>:                     <span class='code_prev_gr'>Number</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;track_number:                   <span class='code_prev_gr'>Number</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#up'>up</a>:                             <span class='code_prev_gr'>Boolean</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;train_orchestration_number:     <span class='code_prev_pi'>String</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#affiliation'>affiliation</a>:                    <span class='code_prev_pi'>String</span><br>&nbsp;&nbsp;<span class='code_prev_comment'>▶&nbsp;1</span><br>&nbsp;&nbsp;<span class='code_prev_comment'>▶&nbsp;2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;:<br>&nbsp;&nbsp;&nbsp;&nbsp;:</code>",
  "10$p":"iketama.json",
  "11$pre":"<code><span class='code_prev_comment'>▼</span>&nbsp;trains<br>&nbsp;&nbsp;<span class='code_prev_comment'>▼</span>&nbsp;0<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#operation_number'>operation_number</a>:               <span class='code_prev_pi'>String</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#line_id'>line_id</a>:                        <span class='code_prev_gr'>Number</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#station_id'>station_id</a>:                     <span class='code_prev_gr'>Number</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;track_number:                   <span class='code_prev_gr'>Number</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#up'>up</a>:                             <span class='code_prev_gr'>Boolean</span><br>&nbsp;&nbsp;<span class='code_prev_comment'>▶&nbsp;1</span><br>&nbsp;&nbsp;<span class='code_prev_comment'>▶&nbsp;2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;:<br>&nbsp;&nbsp;&nbsp;&nbsp;:</code>",
  "12$p":"setagaya.json",
  "13$pre":"<code><span class='code_prev_comment'>▼</span>&nbsp;trains<br>&nbsp;&nbsp;<span class='code_prev_comment'>▼</span>&nbsp;0<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#operation_number'>operation_number</a>:               <span class='code_prev_gr'>Number</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#line_id'>line_id</a>:                        <span class='code_prev_gr'>Number</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#section_id'>section_id</a>:                     <span class='code_prev_gr'>Number</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#up'>up</a>:                             <span class='code_prev_gr'>Boolean</span><br>&nbsp;&nbsp;<span class='code_prev_comment'>▶&nbsp;1</span><br>&nbsp;&nbsp;<span class='code_prev_comment'>▶&nbsp;2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;:<br>&nbsp;&nbsp;&nbsp;&nbsp;:</code>",
  "14$h3":"キー解説",
  "15$h4$$$operation_number":"operation_number",
  "16$p":"列車の運行番号。iketama.jsonのみString型で、他線区ではNumber型。",
  "17$h4$$$kind":"kind,train_kind",
  "18$p":"列車種別。各値の対応関係は以下の通り。",
  "19$div$dmain_table":"<table><tr><th>線区</th><th>kind</th><th>train_kind</th><th>列車種別</th></tr><tr><td rowspan='7'>東横線</td><td class='td_light'><span class='code_prev_pi'>\"普\"</span></td><td class='td_light'><span class='code_prev_gr'>2</span></td><td class='td_light'>各駅停車</td></tr><tr><td><span class='code_prev_pi'>\"急\"</span></td><td><span class='code_prev_gr'>4</span></td><td>急行</td></tr><tr><td class='td_light'><span class='code_prev_pi'>\"通\"</span></td><td class='td_light'><span class='code_prev_gr'>11</span></td><td class='td_light'>通勤特急</td></tr><tr><td><span class='code_prev_pi'>\"特\"</span></td><td><span class='code_prev_gr'>5</span></td><td>特急</td></tr><tr><td class='td_light'><span class='code_prev_pi'>\"Ｆ\"</span></td><td class='td_light'><span class='code_prev_gr'>7</span></td><td class='td_light'>Fライナー</td></tr><tr><td><span class='code_prev_pi'>\"Ｓ\"</span></td><td><span class='code_prev_gr'></span></td><td>Sトレイン</td></tr><tr><td class='td_light'><span class='code_prev_pi'>\"回\"</span></td><td class='td_light'><span class='code_prev_gr'>6</span></td><td class='td_light'>回送</td></tr><tr><td class='td_light' rowspan='3'>目黒線</td><td><span class='code_prev_pi'>\"普\"</span></td><td><span class='code_prev_gr'>2</span></td><td>各駅停車</td></tr><tr><td class='td_light'><span class='code_prev_pi'>\"急\"</span></td><td class='td_light'><span class='code_prev_gr'>4</span></td><td class='td_light'>急行</td></tr><tr><td><span class='code_prev_pi'>\"回\"</span></td><td><span class='code_prev_gr'>6</span></td><td>回送</td></tr><tr><td rowspan='4'>田園都市線</td><td class='td_light'><span class='code_prev_pi'>\"普\"</span></td><td class='td_light'><span class='code_prev_gr'>2</span></td><td class='td_light'>各駅停車</td></tr><tr><td><span class='code_prev_pi'>\"準\"</span></td><td><span class='code_prev_gr'>10</span></td><td>準急</td></tr><tr><td class='td_light'><span class='code_prev_pi'>\"急\"</span></td><td class='td_light'><span class='code_prev_gr'>4</span></td><td class='td_light'>急行</td></tr><tr><td><span class='code_prev_pi'>\"回\"</span></td><td><span class='code_prev_gr'>6</span></td><td>回送</td></tr><tr><td class='td_light' rowspan='4'>大井町線</td><td class='td_light'><span class='code_prev_pi'>\"普\"</span></td><td class='td_light'><span class='code_prev_gr'>2</span></td><td class='td_light'>B各停(二子新地・高津停車)</td></tr><tr><td><span class='code_prev_pi'>\"Ｇ\"</span></td><td><span class='code_prev_gr'>8</span></td><td>G各停(二子新地・高津通過)</td></tr><tr><td class='td_light'><span class='code_prev_pi'>\"急\"</span></td><td class='td_light'><span class='code_prev_gr'>4</span></td><td class='td_light'>急行</td></tr><tr><td><span class='code_prev_pi'>\"回\"</span></td><td><span class='code_prev_gr'>6</span></td><td>回送</td></tr></table>",
  "20$h4$$$delay_time":"delay_time",
  "21$p":"列車の遅延情報。単位は分。",
  "22$h4$$$line_id":"line_id",
  "23$p":"走行線区を表すID。ただし、以下ように一部例外がある。<br><li>toyoko.json内に含まれる目黒線(田園調布～日吉間)の列車→26001<br><li>meguro.json内に含まれる東横線(田園調布～日吉間)の列車→26002<br><li>dento.json内に含まれる大井町線(二子玉川～溝の口間)の列車→26003<br><li>oimachi.json内に含まれる田園都市線(二子玉川～溝の口間)の列車→26004",
  "24$table":[["th$路線","th$値"],["td$東横線","td$<span class='code_prev_gr'>26001</span>"],["td$目黒線","td$<span class='code_prev_gr'>26002</span>"],["td$田園都市線","td$<span class='code_prev_gr'>26003</span>"],["td$大井町線","td$<span class='code_prev_gr'>26004</span>"],["td$池上線","td$<span class='code_prev_gr'>26005</span>"],["td$多摩川線","td$<span class='code_prev_gr'>26006</span>"],["td$世田谷線","td$<span class='code_prev_gr'>26007</span>"]],
  "25$h4$$$num_of_cars":"num_of_cars",
  "26$p":"列車の編成両数。",
  "27$h4$$$train_line_id":"train_line_id",
  "28$p":"走行線区を表すID。用いる値は<a href='#line_id'>#line_id</a>と同一だが、こちらは例外が存在せず実際に走行している線区を表す。",
  "29$h4$$$station_id":"station_id,section_id",
  "30$p":"在線位置を表すID。station_idは駅構内在線時、section_idは駅間在線時に位置を表すため、2つのキーに同時に有効な値が入ることはない。<br>toyoko.json、meguro.json、dento.json、oimachi.jsonでは無効なキーの値がnullとなり、iketama.json、setagaya.jsonではキーそのものが削除される。<br>値と位置の対応関係は以下の通り。",
  "31$img":"1678028400/img1.png",
  "32$img":"1678028400/img2.png",
  "33$h4$$$up":"up",
  "34$p":"列車の進行方向を表す。上り列車の場合はtrue、下り列車の場合はfalseとなる。",
  "35$h4$$$affiliation":"affiliation",
  "36$p":"充当車両の所属を表す。運行番号と比較することで代走が行われているか否かを判別する事が可能。<br>各値の対応関係は以下の通り。",
  "37$div$dmain_table":"<table><tr><th>線区</th><th>値</th><th>所属</th></tr><tr><td rowspan='6'>東横線</td><td class='td_light'><span class='code_prev_pi'>\"急\"</span></td><td class='td_light'>東急電鉄</td></tr><tr><td><span class='code_prev_pi'>\"み\"</span></td><td>横浜高速鉄道</td></tr><tr><td class='td_light'><span class='code_prev_pi'>\"副\"</span></td><td class='td_light'>東京地下鉄</td></tr><tr><td><span class='code_prev_pi'>\"東\"</span></td><td>東武鉄道</td></tr><tr><td class='td_light'><span class='code_prev_pi'>\"西\"</span></td><td class='td_light'>西武鉄道</td></tr><tr><td><span class='code_prev_pi'>\"相\"</span></td><td>相模鉄道</td></tr><td class='td_light' rowspan='4'>目黒線</td><td class='td_light'><span class='code_prev_pi'>\"急\"</span></td><td class='td_light'>東急電鉄</td></tr><tr><td><span class='code_prev_pi'>\"南\"</span></td><td>東京地下鉄、埼玉高速鉄道</td></tr><tr><td class='td_light'><span class='code_prev_pi'>\"都\"</span></td><td class='td_light'>東京都交通局</td></tr><tr><td><span class='code_prev_pi'>\"相\"</span></td><td>相模鉄道</td></tr><tr><td>田園都市線</td><td class='td_light'><span class='code_prev_pi'>\"\"</span></td><td class='td_light'>(識別不可)</td></tr><tr><td class='td_light'>大井町線</td><td><span class='code_prev_pi'>\"\"</span></td><td>-</td></tr></table>"
}
