const addressList = {"14d":[0,0],"20":[8,0],"203b":[16,0],"2070":[32,0],"2074":[40,0],"2075":[48,0],"2080":[56,0],"2081":[64,0],"2082":[72,0],"2083":[80,0],"2084":[88,0],"2085":[96,0],"2103":[104,0],"2116":[120,0],"2192":[136,0],"21e9":[152,0],"2460":[168,0],"2461":[184,0],"25cf":[200,0],"25c6":[216,0],"25c7":[232,0],"27a1":[248,0],"28":[264,0],"29":[272,0],"2b05":[280,0],"2b06":[296,0],"2b07":[312,0],"2d":[328,0],"2f":[336,0],"2b":[344,0],"2e":[352,0],"30":[360,0],"3000":[368,0],"3001":[384,0],"3002":[400,0],"3005":[416,0],"300c":[432,0],"300d":[448,0],"301c":[464,0],"3042":[480,0],"3044":[496,0],"304a":[512,0],"304c":[528,0],"304d":[544,0],"304b":[560,0],"304f":[576,0],"3051":[592,0],"3055":[608,0],"3057":[624,0],"3059":[640,0],"305f":[656,0],"305b":[672,0],"3060":[688,0],"3061":[704,0],"3064":[720,0],"3066":[736,0],"3067":[752,0],"3068":[768,0],"306b":[784,0],"306e":[800,0],"306f":[816,0],"3070":[832,0],"3072":[848,0],"3073":[864,0],"307e":[880,0],"307f":[896,0],"3080":[912,0],"3083":[928,0],"3089":[944,0],"308c":[960,0],"308a":[976,0],"308b":[992,0],"308f":[1008,0],"3092":[1024,0],"3093":[1040,0],"30a4":[1056,0],"30aa":[1072,0],"30ab":[1088,0],"30ad":[1104,0],"30b1":[1120,0],"30b5":[1136,0],"30b9":[1152,0],"30bf":[1168,0],"30c1":[1184,0],"30c3":[1200,0],"30c8":[1216,0],"30c9":[1232,0],"30cb":[1248,0],"30ce":[1264,0],"30d3":[1280,0],"30d6":[1296,0],"30e1":[1312,0],"30e2":[1328,0],"30e5":[1344,0],"30e9":[1360,0],"30eb":[1376,0],"30ec":[1392,0],"30f3":[1408,0],"30fc":[1424,0],"30a2":[1440,0],"30a3":[1456,0],"30a6":[1472,0],"30a8":[1488,0],"30af":[1504,0],"30b0":[1520,0],"30b3":[1536,0],"30b7":[1552,0],"30c6":[1568,0],"30c7":[1584,0],"30cd":[1600,0],"30cf":[1616,0],"30d0":[1632,0],"30d1":[1648,0],"30d5":[1664,0],"30d7":[1680,0],"30db":[1696,0],"30dc":[1712,0],"30de":[1728,0],"30e0":[1744,0],"30ea":[1760,0],"30ed":[1776,0],"30ef":[1792,0],"30f4":[1808,0],"30f6":[1824,0],"30fb":[1840,0],"31":[1856,0],"32":[1864,0],"33":[1872,0],"34":[1880,0],"35":[1888,0],"36":[1896,0],"37":[1904,0],"38":[1912,0],"39":[1920,0],"3a":[1928,0],"3c":[1936,0],"3e":[1944,0],"41":[1952,0],"42":[1960,0],"43":[1968,0],"44":[1976,0],"45":[1984,0],"46":[1992,0],"48":[2000,0],"49":[2008,0],"4d":[2016,0],"4e":[2024,0],"4e00":[2032,0],"4e09":[2048,0],"4e0a":[2064,0],"4e0b":[2080,0],"4e21":[2096,0],"4e2d":[2112,0],"4e57":[2128,0],"4e86":[2144,0],"4e88":[2160,0],"4e95":[2176,0],"4ed5":[2192,0],"4ee4":[2208,0],"4f":[2224,0],"4f4f":[2232,0],"4f5c":[2248,0],"4fc3":[2264,0],"4fdd":[2280,0],"4fe1":[2296,0],"4b":[2312,0],"4c":[2320,0],"4e01":[2328,0],"4e0d":[2344,0],"4e18":[2360,0],"4e45":[2376,0],"4e80":[2392,0],"4e8b":[2408,0],"4e8c":[2424,0],"4eac":[2440,0],"4eba":[2456,0],"4ed6":[2472,0],"4ee3":[2488,0],"4ee5":[2504,0],"4ef6":[2520,0],"4f0a":[2536,0],"4f11":[2552,0],"4f1d":[2568,0],"4f4d":[2584,0],"4f50":[2600,0],"4f53":[2616,0],"4fee":[2632,0],"50":[2648,0],"5024":[2656,0],"505c":[2672,0],"5074":[2688,0],"5098":[2704,0],"5099":[2720,0],"50be":[2736,0],"50cd":[2752,0],"512a":[2768,0],"5143":[2784,0],"5148":[2800,0],"5149":[2816,0],"5165":[2832,0],"5168":[2848,0],"516b":[2864,0],"516c":[2880,0],"516d":[2896,0],"5185":[2912,0],"518d":[2928,0],"51b7":[2944,0],"51e6":[2960,0],"51fa":[2976,0],"52":[2992,0],"5206":[3000,0],"5207":[3016,0],"5217":[3032,0],"521d":[3048,0],"5225":[3064,0],"5230":[3080,0],"5236":[3096,0],"523b":[3112,0],"524a":[3128,0],"524d":[3144,0],"5272":[3160,0],"529b":[3176,0],"52d5":[3192,0],"52a0":[3208,0],"52b9":[3224,0],"52d9":[3240,0],"52e2":[3256,0],"52e4":[3272,0],"53":[3288,0],"5316":[3296,0],"5317":[3312,0],"533a":[3328,0],"5343":[3344,0],"534a":[3360,0],"5357":[3376,0],"5358":[3392,0],"5370":[3408,0],"539a":[3424,0],"539f":[3440,0],"53d6":[3456,0],"53d7":[3472,0],"53f7":[3488,0],"53bb":[3504,0],"53c2":[3520,0],"53f0":[3536,0],"53f3":[3552,0],"53f8":[3568,0],"54":[3584,0],"5404":[3592,0],"5408":[3608,0],"5409":[3624,0],"540d":[3640,0],"5411":[3656,0],"544a":[3672,0],"548c":[3688,0],"54c1":[3704,0],"54e1":[3720,0],"55":[3736,0],"5510":[3744,0],"559a":[3760,0],"559c":[3776,0],"55b6":[3792,0],"56":[3808,0],"5668":[3816,0],"56de":[3832,0],"56fd":[3848,0],"5712":[3864,0],"571f":[3880,0],"5727":[3896,0],"5728":[3912,0],"5730":[3928,0],"5742":[3944,0],"57ce":[3960,0],"57df":[3976,0],"57fa":[3992,0],"5800":[4008,0],"5831":[4024,0],"5834":[4040,0],"585a":[4056,0],"58eb":[4072,0],"58c1":[4088,0],"5909":[4104,0],"5916":[4120,0],"591a":[4136,0],"5927":[4152,0],"5929":[4168,0],"592a":[4184,0],"592e":[4200,0],"5931":[4216,0],"5965":[4232,0],"5973":[4248,0],"59cb":[4264,0],"5a":[4280,0],"5b":[4288,0],"5b50":[4296,0],"5b6b":[4312,0],"5b89":[4328,0],"5b9a":[4344,0],"5ba2":[4360,0],"5bb3":[4376,0],"5bbf":[4392,0],"5c02":[4408,0],"5c0f":[4424,0],"5cf6":[4440,0],"5d":[4456,0],"5e2f":[4464,0],"5e38":[4480,0],"5e73":[4496,0],"5ef6":[4512,0],"5f71":[4528,0],"5f8c":[4544,0],"5fa1":[4560,0],"5fd8":[4576,0],"5b66":[4592,0],"5b87":[4608,0],"5b8c":[4624,0],"5ba4":[4640,0],"5bae":[4656,0],"5be9":[4672,0],"5bfa":[4688,0],"5c0e":[4704,0],"5c71":[4720,0],"5ca9":[4736,0],"5ddd":[4752,0],"5de6":[4768,0],"5e02":[4784,0],"5e03":[4800,0],"5e2d":[4816,0],"5e84":[4832,0],"5ea6":[4848,0],"5ea7":[4864,0],"5eab":[4880,0],"5eb7":[4896,0],"5f15":[4912,0],"5f31":[4928,0],"5f37":[4944,0],"5f53":[4960,0],"5f84":[4976,0],"5f85":[4992,0],"5f92":[5008,0],"5fdc":[5024,0],"5feb":[5040,0],"6025":[5056,0],"6027":[5072,0],"60c5":[5088,0],"61":[5104,0],"610f":[5112,0],"614b":[5128,0],"62":[5144,0],"6210":[5152,0],"6211":[5168,0],"6212":[5184,0],"6238":[5200,0],"623f":[5216,0],"6240":[5232,0],"6247":[5248,0],"6249":[5264,0],"624b":[5280,0],"6253":[5296,0],"6271":[5312,0],"628a":[5328,0],"6291":[5344,0],"6298":[5360,0],"629e":[5376,0],"62bc":[5392,0],"62c5":[5408,0],"62dd":[5424,0],"63":[5440,0],"6307":[5448,0],"631f":[5464,0],"633f":[5480,0],"6383":[5496,0],"638c":[5512,0],"63db":[5528,0],"63a5":[5544,0],"63e1":[5560,0],"63fa":[5576,0],"64":[5592,0],"640d":[5600,0],"643a":[5616,0],"6469":[5632,0],"64cd":[5648,0],"65":[5664,0],"652f":[5672,0],"653e":[5688,0],"6545":[5704,0],"6551":[5720,0],"6570":[5736,0],"6574":[5752,0],"6587":[5768,0],"659c":[5784,0],"65b0":[5800,0],"65b9":[5816,0],"65e5":[5832,0],"65ad":[5848,0],"65c5":[5864,0],"65e9":[5880,0],"66":[5896,0],"660e":[5904,0],"6625":[5920,0],"663c":[5936,0],"6642":[5952,0],"666e":[5968,0],"6696":[5984,0],"6697":[6000,0],"66ae":[6016,0],"66f4":[6032,0],"67":[6048,0],"6708":[6056,0],"6709":[6072,0],"671f":[6088,0],"6728":[6104,0],"672c":[6120,0],"672b":[6136,0],"6749":[6152,0],"6771":[6168,0],"677e":[6184,0],"67b6":[6200,0],"67cf":[6216,0],"67fb":[6232,0],"68":[6248,0],"6817":[6256,0],"6848":[6272,0],"685c":[6288,0],"68d2":[6304,0],"68da":[6320,0],"69":[6336,0],"691c":[6344,0],"696d":[6360,0],"69d8":[6376,0],"69cb":[6392,0],"6a5f":[6408,0],"6b21":[6424,0],"6b62":[6440,0],"6b63":[6456,0],"6b66":[6472,0],"6c5f":[6488,0],"6cb3":[6504,0],"6d77":[6520,0],"6e05":[6536,0],"6e56":[6552,0],"6e7f":[6568,0],"6f":[6584,0],"6a":[6592,0],"6a19":[6600,0],"6a21":[6616,0],"6a2a":[6632,0],"6a4b":[6648,0],"6b":[6664,0],"6b8b":[6672,0],"6bd4":[6688,0],"6c":[6704,0],"6c17":[6712,0],"6c34":[6728,0],"6c60":[6744,0],"6ca2":[6760,0],"6cbb":[6776,0],"6cc1":[6792,0],"6cc9":[6808,0],"6ce8":[6824,0],"6d":[6840,0],"6d5c":[6848,0],"6d66":[6864,0],"6d88":[6880,0],"6df7":[6896,0],"6e":[6912,0],"6e0b":[6920,0],"6e1b":[6936,0],"6e29":[6952,0],"6e58":[6968,0],"6e6f":[6984,0],"6e90":[7000,0],"6e96":[7016,0],"6ec5":[7032,0],"70":[7048,0],"702c":[7056,0],"706b":[7072,0],"706f":[7088,0],"707d":[7104,0],"70b9":[7120,0],"70cf":[7136,0],"7121":[7152,0],"7167":[7168,0],"71b1":[7184,0],"72":[7200,0],"7269":[7208,0],"7279":[7224,0],"72b6":[7240,0],"72ed":[7256,0],"73":[7272,0],"7387":[7280,0],"7389":[7296,0],"73fe":[7312,0],"74":[7328,0],"7403":[7336,0],"7406":[7352,0],"745e":[7368,0],"75":[7384,0],"751f":[7392,0],"7528":[7408,0],"7530":[7424,0],"753a":[7440,0],"753b":[7456,0],"756a":[7472,0],"7570":[7488,0],"75c5":[7504,0],"767a":[7520,0],"767d":[7536,0],"767e":[7552,0],"76f4":[7568,0],"76ee":[7584,0],"76f8":[7600,0],"7701":[7616,0],"7740":[7632,0],"77e2":[7648,0],"77e5":[7664,0],"77ed":[7680,0],"77f3":[7696,0],"78ba":[7712,0],"78d0":[7728,0],"78ef":[7744,0],"79":[7760,0],"793a":[7768,0],"7950":[7784,0],"795e":[7800,0],"79cb":[7816,0],"79d2":[7832,0],"7a7a":[7848,0],"7d30":[7864,0],"7d42":[7880,0],"7dda":[7896,0],"7f6e":[7912,0],"7f8e":[7928,0],"7a0b":[7944,0],"7a2e":[7960,0],"7a32":[7976,0],"7a3c":[7992,0],"7a4d":[8008,0],"7aef":[8024,0],"7af9":[8040,0],"7b2c":[8056,0],"7b97":[8072,0],"7cf8":[8088,0],"7cfb":[8104,0],"7d04":[8120,0],"7d44":[8136,0],"7d66":[8152,0],"7d71":[8168,0],"7d9a":[8184,0],"7dbe":[8200,0],"7dca":[8216,0],"7dcf":[8232,0],"7de0":[8248,0],"7de8":[8264,0],"7de9":[8280,0],"7df4":[8296,0],"7fa4":[8312,0],"8001":[8328,0],"8003":[8344,0],"8005":[8360,0],"8010":[8376,0],"805e":[8392,0],"80fd":[8408,0],"8131":[8424,0],"81ea":[8440,0],"81e8":[8456,0],"822a":[8472,0],"8239":[8488,0],"826f":[8504,0],"8272":[8520,0],"8336":[8536,0],"8377":[8552,0],"83ca":[8568,0],"83ef":[8584,0],"8429":[8600,0],"8449":[8616,0],"84c4":[8632,0],"8535":[8648,0],"85e4":[8664,0],"884c":[8680,0],"8857":[8696,0],"8868":[8712,0],"888b":[8728,0],"88c5":[8744,0],"88dc":[8760,0],"897f":[8776,0],"898b":[8792,0],"89a7":[8808,0],"89e3":[8824,0],"8a2d":[8840,0],"8a66":[8856,0],"8a6b":[8872,0],"8a71":[8888,0],"8a73":[8904,0],"8a8d":[8920,0],"8abf":[8936,0],"8b66":[8952,0],"8b77":[8968,0],"8c37":[8984,0],"8def":[9000,0],"8eca":[9016,0],"8ee2":[9032,0],"8fbc":[9048,0],"8fd4":[9064,0],"8a08":[9080,0],"8a18":[9096,0],"8a8c":[9112,0],"8a98":[9128,0],"8d77":[9144,0],"8d8a":[9160,0],"8db3":[9176,0],"8ddd":[9192,0],"8e0f":[9208,0],"8eab":[9224,0],"8f2a":[9240,0],"9000":[9256,0],"9001":[9272,0],"901a":[9288,0],"901f":[9304,0],"9023":[9320,0],"9032":[9336,0],"9045":[9352,0],"904b":[9368,0],"904a":[9384,0],"904e":[9400,0],"9053":[9416,0],"9060":[9432,0],"9078":[9448,0],"907a":[9464,0],"907f":[9480,0],"90e8":[9496,0],"90fd":[9512,0],"90ce":[9528,0],"91cc":[9544,0],"91d1":[9560,0],"91ce":[9576,0],"91cf":[9592,0],"9244":[9608,0],"9326":[9624,0],"9332":[9640,0],"9577":[9656,0],"9580":[9672,0],"9589":[9688,0],"958b":[9704,0],"9593":[9720,0],"95a2":[9736,0],"9632":[9752,0],"964d":[9768,0],"9650":[9784,0],"9664":[9800,0],"9694":[9816,0],"969c":[9832,0],"96ea":[9848,0],"96fb":[9864,0],"96d1":[9880,0],"96e2":[9896,0],"9707":[9912,0],"971e":[9928,0],"975e":[9944,0],"9762":[9960,0],"97ff":[9976,0],"9803":[9992,0],"9805":[10008,0],"9818":[10024,0],"984c":[10040,0],"98a8":[10056,0],"98ef":[10072,0],"99c5":[10088,0],"99c6":[10104,0],"99d0":[10120,0],"99ac":[10136,0],"9a13":[10152,0],"9ad8":[10168,0],"9daf":[10184,0],"9e97":[10200,0],"9ed2":[10216,0],"b2":[10232,0],"b3":[10240,0],"b9":[10248,0],"ff08":[10256,0],"ff09":[10272,0],"ff0a":[10288,0],"ff0b":[10304,0],"ff0e":[10320,0],"ff0f":[10336,0],"ff10":[10352,0],"ff11":[10368,0],"ff12":[10384,0],"ff13":[10400,0],"ff14":[10416,0],"ff15":[10432,0],"ff16":[10448,0],"ff17":[10464,0],"ff18":[10480,0],"ff19":[10496,0],"ff1a":[10512,0],"ff21":[10528,0],"ff22":[10544,0],"ff23":[10560,0],"ff25":[10576,0],"ff26":[10592,0],"ff27":[10608,0],"ff28":[10624,0],"ff2b":[10640,0],"ff2d":[10656,0],"ff2f":[10672,0],"ff30":[10688,0],"ff33":[10704,0],"ff34":[10720,0],"ff39":[10736,0],"ff3a":[10752,0],"ff4b":[10768,0],"ff4d":[10784,0],"ff5e":[10800,0],"ff05":[10816,0],"ff0d":[10832,0],"ff24":[10848,0],"ff29":[10864,0],"ff2a":[10880,0],"ff2e":[10896,0],"ff32":[10912,0],"ff36":[10928,0],"ff37":[10944,0],"ff42":[10960,0],"ff65":[10976,0],"ff68":[10984,0],"ff6b":[10992,0],"ff6d":[11000,0],"ff6e":[11008,0],"ff6f":[11016,0],"ff70":[11024,0],"ff71":[11032,0],"ff72":[11040,0],"ff75":[11048,0],"ff77":[11056,0],"ff78":[11064,0],"ff7a":[11072,0],"ff7b":[11080,0],"ff7c":[11088,0],"ff7d":[11096,0],"ff7e":[11104,0],"ff80":[11112,0],"ff81":[11120,0],"ff83":[11128,0],"ff84":[11136,0],"ff86":[11144,0],"ff89":[11152,0],"ff8a":[11160,0],"ff8b":[11168,0],"ff8c":[11176,0],"ff8e":[11184,0],"ff8f":[11192,0],"ff91":[11200,0],"ff92":[11208,0],"ff93":[11216,0],"ff97":[11224,0],"ff98":[11232,0],"ff99":[11240,0],"ff9a":[11248,0],"ff9b":[11256,0],"ff9d":[11264,0],"ff9e":[11272,0],"ff9f":[11280,0],"fff0":[11288,0],"fff1":[11304,0],"fff2":[11320,0],"fff3":[11336,0],"fff4":[11352,0],"fff5":[11368,0],"fff6":[11384,0],"fff7":[11400,0]};
const exceptionList = ["b9","b2","b3","14d","2070","2071","2072","2073","2074","2075","2076","2077","2078","2079","2080","2081","2082","2083","2084","2085"];

function _1669302000_colorchange(){
  document.getElementById('colorDisplay').textContent = document.getElementById('textColor').value;
}

function _1669302000_run(){
  document.getElementById('errorInfo').classList.add('hidden');
  document.getElementById('errorInfo').innerHTML = '';
  const inputStr = document.getElementById('textInput').value;
  textColor = document.getElementById('textColor').value;
  let errorText = '以下の文字を変換できませんでした:<br>';
  let isError = false;
  let canvasElement = document.getElementById('imageOutput');
  let canvasContext = canvasElement.getContext('2d');
  let imageElement = document.getElementById('sourceImage');
  canvasContext.clearRect(0,0,canvasElement.width,canvasElement.height);
  const splitText = inputStr.split('');
  let sWidth = 0;
  let dx = 0;
  let maxWidth = 0;
  let maxHeight = 16;
  for(let i=0;i<splitText.length;i++){
    if(addressList[splitText[i].codePointAt(0).toString(16)] !== undefined && splitText[i].codePointAt(0).toString(10) !== '10'){
      if(splitText[i].codePointAt(0).toString(10) < 128 || splitText[i].codePointAt(0).toString(10) > 65377 || exceptionList.indexOf(splitText[i].codePointAt(0).toString(16)) !== -1){
        sWidth = 8;
      }else{
        sWidth = 16;
      }
      dx = dx + sWidth;
      if(dx > maxWidth){
        maxWidth = dx;
      }
    }else if(splitText[i].codePointAt(0).toString(10) === '10'){
      dx = 0;
      maxHeight = maxHeight + 16;
    }else{
      dx = dx + 16;
    }
  }
  if(dx > maxWidth){
    maxWidth = dx;
  }
  canvasElement.width = maxWidth;
  canvasElement.height = maxHeight;
  canvasContext.fillStyle = 'rgb(0,0,0)';
  canvasContext.fillRect(0,0,maxWidth,maxHeight);
  let sx = 0;
  let sy = 0;
  sWidth = 0;
  let sHeight = 16;
  dx = 0;
  let dy = 0;
  for(let i=0;i<splitText.length;i++){
    if(addressList[splitText[i].codePointAt(0).toString(16)] !== undefined && splitText[i].codePointAt(0).toString(10) !== '10'){
      sx = addressList[splitText[i].codePointAt(0).toString(16)][0];
      sy = addressList[splitText[i].codePointAt(0).toString(16)][1];
      if(splitText[i].codePointAt(0).toString(10) < 128 || splitText[i].codePointAt(0).toString(10) > 65377 || exceptionList.indexOf(splitText[i].codePointAt(0).toString(16)) !== -1){
        sWidth = 8;
      }else{
        sWidth = 16;
      }
      canvasContext.fillStyle = textColor;
      canvasContext.fillRect(dx,dy,sWidth,sHeight);
      canvasContext.drawImage(imageElement,sx,sy,sWidth,sHeight,dx,dy,sWidth,sHeight);
      dx = dx + sWidth;
    }else if(splitText[i].codePointAt(0).toString(10) === '10'){
      dx = 0;
      dy = dy + 16;
    }else{
      canvasContext.fillStyle = textColor;
      canvasContext.fillRect(dx,dy,16,16);
      canvasContext.drawImage(imageElement,0,16,16,16,dx,dy,16,16);
      isError = true;
      errorText += splitText[i] + ' (U+' + splitText[i].codePointAt(0).toString(16) + ')<br>';
      dx = dx + 16;
    }
  }
  if(isError === true){
    document.getElementById('errorInfo').classList.remove('hidden');
    document.getElementById('errorInfo').innerHTML = errorText;
  }
}
