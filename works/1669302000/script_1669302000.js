const addressList = { "14d":[0,0],"20":[8,0],"203b":[16,0],"2070":[32,0],"2074":[40,0],"2075":[48,0],"2080":[56,0],"2081":[64,0],"2083":[72,0],"2084":[80,0],"2085":[88,0],"2103":[96,0],"2116":[112,0],"2192":[128,0],"21e9":[144,0],"2460":[160,0],"2461":[176,0],"25cf":[192,0],"25c6":[208,0],"25c7":[224,0],"27a1":[240,0],"28":[256,0],"29":[264,0],"2b05":[272,0],"2b06":[288,0],"2b07":[304,0],"2d":[320,0],"2f":[328,0],"2b":[336,0],"2e":[344,0],"30":[352,0],"3000":[360,0],"3001":[376,0],"3002":[392,0],"3005":[408,0],"300c":[424,0],"300d":[440,0],"3042":[456,0],"3044":[472,0],"304a":[488,0],"304c":[504,0],"304d":[520,0],"304f":[536,0],"3051":[552,0],"3055":[568,0],"3057":[584,0],"3059":[600,0],"305f":[616,0],"305b":[632,0],"3060":[648,0],"3061":[664,0],"3064":[680,0],"3066":[696,0],"3067":[712,0],"3068":[728,0],"306b":[744,0],"306e":[760,0],"306f":[776,0],"3070":[792,0],"3072":[808,0],"3073":[824,0],"307e":[840,0],"307f":[856,0],"3080":[872,0],"3083":[888,0],"3089":[904,0],"308c":[920,0],"308a":[936,0],"308b":[952,0],"308f":[968,0],"3092":[984,0],"30a4":[1000,0],"30aa":[1016,0],"30ab":[1032,0],"30ad":[1048,0],"30b1":[1064,0],"30b5":[1080,0],"30b9":[1096,0],"30bf":[1112,0],"30c1":[1128,0],"30c3":[1144,0],"30c8":[1160,0],"30c9":[1176,0],"30cb":[1192,0],"30ce":[1208,0],"30d3":[1224,0],"30d6":[1240,0],"30e1":[1256,0],"30e2":[1272,0],"30e5":[1288,0],"30e9":[1304,0],"30eb":[1320,0],"30ec":[1336,0],"30f3":[1352,0],"30fc":[1368,0],"30a2":[1384,0],"30a3":[1400,0],"30a6":[1416,0],"30a8":[1432,0],"30af":[1448,0],"30b0":[1464,0],"30b3":[1480,0],"30b7":[1496,0],"30c6":[1512,0],"30c7":[1528,0],"30cd":[1544,0],"30cf":[1560,0],"30d0":[1576,0],"30d1":[1592,0],"30d5":[1608,0],"30d7":[1624,0],"30db":[1640,0],"30de":[1656,0],"30e0":[1672,0],"30ea":[1688,0],"30ed":[1704,0],"30ef":[1720,0],"30f4":[1736,0],"30f6":[1752,0],"30fb":[1768,0],"31":[1784,0],"32":[1792,0],"33":[1800,0],"34":[1808,0],"35":[1816,0],"36":[1824,0],"37":[1832,0],"38":[1840,0],"39":[1848,0],"3a":[1856,0],"3c":[1864,0],"3e":[1872,0],"41":[1880,0],"42":[1888,0],"43":[1896,0],"44":[1904,0],"45":[1912,0],"46":[1920,0],"48":[1928,0],"49":[1936,0],"4d":[1944,0],"4e":[1952,0],"4e00":[1960,0],"4e09":[1976,0],"4e0a":[1992,0],"4e0b":[2008,0],"4e21":[2024,0],"4e2d":[2040,0],"4e57":[2056,0],"4e86":[2072,0],"4e88":[2088,0],"4e95":[2104,0],"4ed5":[2120,0],"4ee4":[2136,0],"4f":[2152,0],"4f4f":[2160,0],"4f5c":[2176,0],"4fc3":[2192,0],"4fdd":[2208,0],"4fe1":[2224,0],"4b":[2240,0],"4c":[2248,0],"4e01":[2256,0],"4e0d":[2272,0],"4e18":[2288,0],"4e8b":[2304,0],"4e8c":[2320,0],"4eac":[2336,0],"4eba":[2352,0],"4ed6":[2368,0],"4ee3":[2384,0],"4ee5":[2400,0],"4ef6":[2416,0],"4f0a":[2432,0],"4f11":[2448,0],"4f1d":[2464,0],"4f4d":[2480,0],"4f53":[2496,0],"4fee":[2512,0],"50":[2528,0],"5024":[2536,0],"505c":[2552,0],"5074":[2568,0],"5098":[2584,0],"5099":[2600,0],"50be":[2616,0],"50cd":[2632,0],"512a":[2648,0],"5143":[2664,0],"5148":[2680,0],"5149":[2696,0],"5165":[2712,0],"5168":[2728,0],"516b":[2744,0],"516c":[2760,0],"516d":[2776,0],"5185":[2792,0],"518d":[2808,0],"51b7":[2824,0],"51e6":[2840,0],"51fa":[2856,0],"52":[2872,0],"5206":[2880,0],"5207":[2896,0],"5217":[2912,0],"521d":[2928,0],"5225":[2944,0],"5230":[2960,0],"5236":[2976,0],"523b":[2992,0],"524a":[3008,0],"524d":[3024,0],"5272":[3040,0],"529b":[3056,0],"52d5":[3072,0],"52a0":[3088,0],"52b9":[3104,0],"52d9":[3120,0],"52e2":[3136,0],"52e4":[3152,0],"53":[3168,0],"5316":[3176,0],"5317":[3192,0],"533a":[3208,0],"5343":[3224,0],"534a":[3240,0],"5357":[3256,0],"5358":[3272,0],"5370":[3288,0],"539a":[3304,0],"539f":[3320,0],"53d6":[3336,0],"53d7":[3352,0],"53f7":[3368,0],"53bb":[3384,0],"53c2":[3400,0],"53f0":[3416,0],"53f3":[3432,0],"53f8":[3448,0],"54":[3464,0],"5404":[3472,0],"5408":[3488,0],"5409":[3504,0],"540d":[3520,0],"5411":[3536,0],"544a":[3552,0],"548c":[3568,0],"54c1":[3584,0],"54e1":[3600,0],"55":[3616,0],"5510":[3624,0],"559a":[3640,0],"55b6":[3656,0],"56":[3672,0],"5668":[3680,0],"56de":[3696,0],"56fd":[3712,0],"5712":[3728,0],"571f":[3744,0],"5727":[3760,0],"5728":[3776,0],"5730":[3792,0],"5742":[3808,0],"57ce":[3824,0],"57df":[3840,0],"57fa":[3856,0],"5800":[3872,0],"5831":[3888,0],"5834":[3904,0],"585a":[3920,0],"58eb":[3936,0],"58c1":[3952,0],"5909":[3968,0],"5916":[3984,0],"591a":[4000,0],"5927":[4016,0],"592a":[4032,0],"592e":[4048,0],"5931":[4064,0],"5965":[4080,0],"5973":[4096,0],"59cb":[4112,0],"5a":[4128,0],"5b":[4136,0],"5b50":[4144,0],"5b6b":[4160,0],"5b89":[4176,0],"5b9a":[4192,0],"5ba2":[4208,0],"5bb3":[4224,0],"5bbf":[4240,0],"5c02":[4256,0],"5c0f":[4272,0],"5cf6":[4288,0],"5d":[4304,0],"5e2f":[4312,0],"5e38":[4328,0],"5e73":[4344,0],"5ef6":[4360,0],"5f71":[4376,0],"5f8c":[4392,0],"5fa1":[4408,0],"5fd8":[4424,0],"5b66":[4440,0],"5b87":[4456,0],"5ba4":[4472,0],"5bae":[4488,0],"5be9":[4504,0],"5bfa":[4520,0],"5c0e":[4536,0],"5c71":[4552,0],"5ddd":[4568,0],"5de6":[4584,0],"5e02":[4600,0],"5e2d":[4616,0],"5ea6":[4632,0],"5ea7":[4648,0],"5eab":[4664,0],"5eb7":[4680,0],"5f15":[4696,0],"5f31":[4712,0],"5f37":[4728,0],"5f84":[4744,0],"5f85":[4760,0],"5f92":[4776,0],"5fdc":[4792,0],"5feb":[4808,0],"6025":[4824,0],"6027":[4840,0],"60c5":[4856,0],"61":[4872,0],"610f":[4880,0],"614b":[4896,0],"62":[4912,0],"6210":[4920,0],"6211":[4936,0],"6212":[4952,0],"6238":[4968,0],"623f":[4984,0],"6240":[5000,0],"6247":[5016,0],"6249":[5032,0],"624b":[5048,0],"6253":[5064,0],"6271":[5080,0],"628a":[5096,0],"6291":[5112,0],"6298":[5128,0],"629e":[5144,0],"62bc":[5160,0],"62dd":[5176,0],"63":[5192,0],"6307":[5200,0],"631f":[5216,0],"633f":[5232,0],"6383":[5248,0],"638c":[5264,0],"63db":[5280,0],"63a5":[5296,0],"63e1":[5312,0],"63fa":[5328,0],"64":[5344,0],"640d":[5352,0],"643a":[5368,0],"6469":[5384,0],"65":[5400,0],"652f":[5408,0],"653e":[5424,0],"6545":[5440,0],"6551":[5456,0],"6570":[5472,0],"6574":[5488,0],"6587":[5504,0],"659c":[5520,0],"65b0":[5536,0],"65b9":[5552,0],"65e5":[5568,0],"65ad":[5584,0],"65c5":[5600,0],"65e9":[5616,0],"660e":[5632,0],"6625":[5648,0],"663c":[5664,0],"6642":[5680,0],"666e":[5696,0],"6696":[5712,0],"6697":[5728,0],"66ae":[5744,0],"66f4":[5760,0],"67":[5776,0],"6708":[5784,0],"6709":[5800,0],"671f":[5816,0],"6728":[5832,0],"672c":[5848,0],"672b":[5864,0],"6749":[5880,0],"6771":[5896,0],"677e":[5912,0],"67b6":[5928,0],"67cf":[5944,0],"67fb":[5960,0],"68":[5976,0],"6817":[5984,0],"6848":[6000,0],"685c":[6016,0],"68d2":[6032,0],"68da":[6048,0],"69":[6064,0],"691c":[6072,0],"696d":[6088,0],"69d8":[6104,0],"69cb":[6120,0],"6a5f":[6136,0],"6b21":[6152,0],"6b62":[6168,0],"6b63":[6184,0],"6b66":[6200,0],"6c5f":[6216,0],"6cb3":[6232,0],"6d77":[6248,0],"6e05":[6264,0],"6e56":[6280,0],"6e7f":[6296,0],"6f":[6312,0],"6a":[6320,0],"6a19":[6328,0],"6a21":[6344,0],"6a2a":[6360,0],"6a4b":[6376,0],"6b":[6392,0],"6b8b":[6400,0],"6c":[6416,0],"6c17":[6424,0],"6c34":[6440,0],"6c60":[6456,0],"6ca2":[6472,0],"6cbb":[6488,0],"6cc1":[6504,0],"6cc9":[6520,0],"6ce8":[6536,0],"6d":[6552,0],"6d5c":[6560,0],"6d66":[6576,0],"6d88":[6592,0],"6df7":[6608,0],"6e":[6624,0],"6e0b":[6632,0],"6e1b":[6648,0],"6e29":[6664,0],"6e58":[6680,0],"6e6f":[6696,0],"6e90":[6712,0],"6e96":[6728,0],"6ec5":[6744,0],"70":[6760,0],"702c":[6768,0],"706b":[6784,0],"706f":[6800,0],"707d":[6816,0],"70b9":[6832,0],"70cf":[6848,0],"7121":[6864,0],"7167":[6880,0],"71b1":[6896,0],"72":[6912,0],"7269":[6920,0],"7279":[6936,0],"72b6":[6952,0],"72ed":[6968,0],"73":[6984,0],"7387":[6992,0],"7389":[7008,0],"73fe":[7024,0],"74":[7040,0],"7403":[7048,0],"7406":[7064,0],"745e":[7080,0],"75":[7096,0],"751f":[7104,0],"7528":[7120,0],"7530":[7136,0],"753a":[7152,0],"753b":[7168,0],"756a":[7184,0],"7570":[7200,0],"75c5":[7216,0],"767a":[7232,0],"767d":[7248,0],"767e":[7264,0],"76f4":[7280,0],"76ee":[7296,0],"76f8":[7312,0],"7701":[7328,0],"7740":[7344,0],"77e2":[7360,0],"77e5":[7376,0],"77ed":[7392,0],"77f3":[7408,0],"78ba":[7424,0],"78d0":[7440,0],"78ef":[7456,0],"79":[7472,0],"793a":[7480,0],"795e":[7496,0],"79cb":[7512,0],"79d2":[7528,0],"7a7a":[7544,0],"7d30":[7560,0],"7d42":[7576,0],"7dda":[7592,0],"7f6e":[7608,0],"7f8e":[7624,0],"7a0b":[7640,0],"7a2e":[7656,0],"7a32":[7672,0],"7a3c":[7688,0],"7a4d":[7704,0],"7aef":[7720,0],"7af9":[7736,0],"7b2c":[7752,0],"7b97":[7768,0],"7cfb":[7784,0],"7d04":[7800,0],"7d44":[7816,0],"7d66":[7832,0],"7d71":[7848,0],"7d9a":[7864,0],"7dbe":[7880,0],"7dca":[7896,0],"7dcf":[7912,0],"7de0":[7928,0],"7de8":[7944,0],"7de9":[7960,0],"7df4":[7976,0],"7fa4":[7992,0],"8001":[8008,0],"8003":[8024,0],"8005":[8040,0],"8010":[8056,0],"805e":[8072,0],"80fd":[8088,0],"81ea":[8104,0],"81e8":[8120,0],"822a":[8136,0],"8239":[8152,0],"826f":[8168,0],"8272":[8184,0],"8336":[8200,0],"8377":[8216,0],"83ca":[8232,0],"83ef":[8248,0],"8429":[8264,0],"8449":[8280,0],"84c4":[8296,0],"8535":[8312,0],"85e4":[8328,0],"884c":[8344,0],"8857":[8360,0],"8868":[8376,0],"888b":[8392,0],"88c5":[8408,0],"88dc":[8424,0],"897f":[8440,0],"898b":[8456,0],"89a7":[8472,0],"89e3":[8488,0],"8a2d":[8504,0],"8a66":[8520,0],"8a6b":[8536,0],"8a71":[8552,0],"8a73":[8568,0],"8a8d":[8584,0],"8abf":[8600,0],"8b66":[8616,0],"8b77":[8632,0],"8c37":[8648,0],"8def":[8664,0],"8eca":[8680,0],"8ee2":[8696,0],"8fbc":[8712,0],"8fd4":[8728,0],"8a08":[8744,0],"8a18":[8760,0],"8a8c":[8776,0],"8a98":[8792,0],"8d77":[8808,0],"8d8a":[8824,0],"8db3":[8840,0],"8ddd":[8856,0],"8e0f":[8872,0],"8eab":[8888,0],"8f2a":[8904,0],"9000":[8920,0],"9001":[8936,0],"901a":[8952,0],"901f":[8968,0],"9023":[8984,0],"9032":[9000,0],"9045":[9016,0],"904b":[9032,0],"904a":[9048,0],"904e":[9064,0],"9053":[9080,0],"9060":[9096,0],"9078":[9112,0],"907a":[9128,0],"907f":[9144,0],"90e8":[9160,0],"90fd":[9176,0],"90ce":[9192,0],"91cc":[9208,0],"91d1":[9224,0],"91ce":[9240,0],"91cf":[9256,0],"9244":[9272,0],"9332":[9288,0],"9577":[9304,0],"9580":[9320,0],"9589":[9336,0],"958b":[9352,0],"9593":[9368,0],"95a2":[9384,0],"9632":[9400,0],"964d":[9416,0],"9650":[9432,0],"9664":[9448,0],"9694":[9464,0],"969c":[9480,0],"96ea":[9496,0],"96fb":[9512,0],"96d1":[9528,0],"96e2":[9544,0],"9707":[9560,0],"971e":[9576,0],"975e":[9592,0],"9762":[9608,0],"97ff":[9624,0],"9803":[9640,0],"9805":[9656,0],"9818":[9672,0],"984c":[9688,0],"98a8":[9704,0],"98ef":[9720,0],"99c5":[9736,0],"99c6":[9752,0],"99d0":[9768,0],"99ac":[9784,0],"9a13":[9800,0],"9ad8":[9816,0],"9daf":[9832,0],"9e97":[9848,0],"9ed2":[9864,0],"b2":[9880,0],"b3":[9888,0],"b9":[9896,0],"ff08":[9904,0],"ff09":[9920,0],"ff0a":[9936,0],"ff0b":[9952,0],"ff0e":[9968,0],"ff0f":[9984,0],"ff10":[10000,0],"ff11":[10016,0],"ff12":[10032,0],"ff13":[10048,0],"ff14":[10064,0],"ff15":[10080,0],"ff16":[10096,0],"ff17":[10112,0],"ff18":[10128,0],"ff19":[10144,0],"ff1a":[10160,0],"ff21":[10176,0],"ff22":[10192,0],"ff23":[10208,0],"ff25":[10224,0],"ff26":[10240,0],"ff27":[10256,0],"ff28":[10272,0],"ff2b":[10288,0],"ff2d":[10304,0],"ff2f":[10320,0],"ff30":[10336,0],"ff33":[10352,0],"ff34":[10368,0],"ff39":[10384,0],"ff3a":[10400,0],"ff4b":[10416,0],"ff4d":[10432,0],"ff5e":[10448,0],"ff05":[10464,0],"ff0d":[10480,0],"ff24":[10496,0],"ff29":[10512,0],"ff2a":[10528,0],"ff2e":[10544,0],"ff32":[10560,0],"ff36":[10576,0],"ff37":[10592,0],"ff68":[10608,0],"ff6b":[10616,0],"ff6d":[10624,0],"ff6e":[10632,0],"ff6f":[10640,0],"ff70":[10648,0],"ff71":[10656,0],"ff72":[10664,0],"ff75":[10672,0],"ff77":[10680,0],"ff78":[10688,0],"ff7a":[10696,0],"ff7b":[10704,0],"ff7c":[10712,0],"ff7d":[10720,0],"ff7e":[10728,0],"ff80":[10736,0],"ff81":[10744,0],"ff83":[10752,0],"ff84":[10760,0],"ff86":[10768,0],"ff89":[10776,0],"ff8a":[10784,0],"ff8b":[10792,0],"ff8c":[10800,0],"ff8e":[10808,0],"ff8f":[10816,0],"ff91":[10824,0],"ff92":[10832,0],"ff93":[10840,0],"ff97":[10848,0],"ff98":[10856,0],"ff99":[10864,0],"ff9a":[10872,0],"ff9b":[10880,0],"ff9d":[10888,0],"ff9e":[10896,0],"ff9f":[10904,0]};
const exceptionList = ["b9","b2","b3","14d","2070","2071","2072","2073","2074","2075","2076","2077","2078","2079","2080","2081","2082","2083","2084","2085"];

function _1669302000_colorchange(){
  document.getElementById('colorDisplay').textContent = document.getElementById('textColor').value;
}

function _1669302000_run(){
  const inputStr = document.getElementById('textInput').value;
  textColor = document.getElementById('textColor').value;
  let errorText = '以下の文字を変換できませんでした:<br>';
  let isError = false;
  let canvasElement = document.getElementById('imageOutput');
  let canvasContext = canvasElement.getContext('2d');
  let imageElement = document.getElementById('sourceImage');
  canvasContext.clearRect(0,0,canvasElement.width,canvasElement.height);
  const splitText = inputStr.split('');
  let sWidth = 0;
  let dx = 0;
  let maxWidth = 0;
  let maxHeight = 16;
  for(let i=0;i<splitText.length;i++){
    if(addressList[splitText[i].codePointAt(0).toString(16)] !== undefined && splitText[i].codePointAt(0).toString(10) !== '10'){
      if(splitText[i].codePointAt(0).toString(10) < 128 || splitText[i].codePointAt(0).toString(10) > 65377 || exceptionList.indexOf(splitText[i].codePointAt(0).toString(16)) !== -1){
        sWidth = 8;
      }else{
        sWidth = 16;
      }
      dx = dx + sWidth;
      if(dx > maxWidth){
        maxWidth = dx;
      }
    }else if(splitText[i].codePointAt(0).toString(10) === '10'){
      dx = 0;
      maxHeight = maxHeight + 16;
    }else{
      dx = dx + 16;
    }
  }
  if(dx > maxWidth){
    maxWidth = dx;
  }
  canvasElement.width = maxWidth;
  canvasElement.height = maxHeight;
  canvasContext.fillStyle = 'rgb(0,0,0)';
  canvasContext.fillRect(0,0,maxWidth,maxHeight);
  let sx = 0;
  let sy = 0;
  sWidth = 0;
  let sHeight = 16;
  dx = 0;
  let dy = 0;
  for(let i=0;i<splitText.length;i++){
    if(addressList[splitText[i].codePointAt(0).toString(16)] !== undefined && splitText[i].codePointAt(0).toString(10) !== '10'){
      sx = addressList[splitText[i].codePointAt(0).toString(16)][0];
      sy = addressList[splitText[i].codePointAt(0).toString(16)][1];
      if(splitText[i].codePointAt(0).toString(10) < 128 || splitText[i].codePointAt(0).toString(10) > 65377 || exceptionList.indexOf(splitText[i].codePointAt(0).toString(16)) !== -1){
        sWidth = 8;
      }else{
        sWidth = 16;
      }
      canvasContext.fillStyle = textColor;
      canvasContext.fillRect(dx,dy,sWidth,sHeight);
      canvasContext.drawImage(imageElement,sx,sy,sWidth,sHeight,dx,dy,sWidth,sHeight);
      dx = dx + sWidth;
    }else if(splitText[i].codePointAt(0).toString(10) === '10'){
      dx = 0;
      dy = dy + 16;
    }else{
      canvasContext.fillStyle = textColor;
      canvasContext.fillRect(dx,dy,16,16);
      canvasContext.drawImage(imageElement,0,16,16,16,dx,dy,16,16);
      isError = true;
      errorText += splitText[i] + ' (U+' + splitText[i].codePointAt(0).toString(16) + ')<br>';
      dx = dx + 16;
    }
  }
  if(isError === true){
    document.getElementById('errorInfo').classList.remove('hidden');
    document.getElementById('errorInfo').innerHTML = errorText;
  }
}
